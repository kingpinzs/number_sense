<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Number Sense Suite — Assessment • Coach • Training • Cognition</title>
    <link rel="stylesheet" href="styles/styles.css" />
</head>

<body>
    <header>
        <div class="bar">
            <div class="brand">Number Sense Suite</div>
            <div class="tabs">
                <div class="tabset" id="tabset"></div>
                <select class="tab-select" id="tabselect"></select>
            </div>
            <span class="tag">Local only • CSV export</span>
        </div>
    </header>

    <main>
        <!-- Assessment -->
        <section id="assessment" class="active">
            <h2>Assessment (Baseline / Retest)</h2>
            <div class="card">
                <div class="row">
                    <label>Mode</label>
                    <select id="assess-mode">
                        <option value="baseline">Baseline</option>
                        <option value="retest">Retest</option>
                    </select>
                    <label>Sessions before Retest</label>
                    <select id="assess-sessions">
                        <option>10</option>
                        <option selected>15</option>
                        <option>20</option>
                    </select>
                    <button id="assess-start">Run Full Assessment</button>
                </div>
                <div class="muted">No scrolling: launches a full-screen flow with a Back button.</div>
            </div>
            <div id="assess-report" class="card" style="display:none"></div>
        </section>

        <!-- Coach -->
        <section id="coach">
            <h2>Coach (Adaptive Trainer)</h2>
            <div class="card">
                <div class="row">
                    <label>Blocks</label><select id="coach-blocks">
                        <option>3</option>
                        <option selected>4</option>
                        <option>5</option>
                    </select>
                    <label>Facts Timer</label><select id="coach-fact-secs">
                        <option>45</option>
                        <option selected>60</option>
                        <option>90</option>
                    </select>
                    <button id="coach-start">Start Session</button>
                </div>
                <div class="muted">Runs as a full-screen flow; weights/timers adapt automatically.</div>
            </div>
        </section>

        <!-- Train (quick, inline) -->
        <section id="train">
            <h2>Train</h2>
            <div class="card">
                <div class="row"><strong>Subitize</strong>
                    <label>Max Dots</label><select id="s-max">
                        <option>4</option>
                        <option selected>6</option>
                        <option>9</option>
                    </select>
                    <label>Flash (ms)</label><select id="s-ms">
                        <option>800</option>
                        <option selected>1200</option>
                        <option>1600</option>
                    </select>
                    <button id="s-start">Start Trial</button>
                </div>
                <div class="dotgrid" id="s-grid"></div>
                <div class="row"><input id="s-guess" type="number" placeholder="How many?">
                    <button id="s-submit">Submit</button><span id="s-fb" class="muted"></span>
                </div>
            </div>

            <div class="card">
                <div class="row"><strong>Number Line</strong>
                    <label>Range</label><select id="nl-range">
                        <option>0-10</option>
                        <option>0-20</option>
                        <option selected>0-100</option>
                        <option>0-1</option>
                    </select>
                    <label>Ticks</label><select id="nl-ticks">
                        <option value="full">Full</option>
                        <option value="ends" selected>Ends</option>
                        <option value="none">None</option>
                    </select>
                    <button id="nl-new">New Target</button>
                </div>
                <div class="muted">Click the line to place your guess.</div>
                <div class="numline" id="nl-area">
                    <div class="nl-track"></div>
                    <div class="nl-pointer" id="nl-pointer"></div>
                </div>
                <div class="row"><button id="nl-check">Check</button><span id="nl-fb" class="muted"></span></div>
            </div>

            <div class="card">
                <div class="row"><strong>Facts</strong>
                    <label>Op</label><select id="ff-op">
                        <option value="+">+</option>
                        <option value="-">-</option>
                        <option value="×">×</option>
                        <option value="÷">÷</option>
                        <option value="mix" selected>Mix</option>
                    </select>
                    <label>Max</label><select id="ff-max">
                        <option>10</option>
                        <option selected>20</option>
                        <option>100</option>
                    </select>
                    <label>Timer</label><select id="ff-sec">
                        <option>45</option>
                        <option selected>60</option>
                        <option>90</option>
                    </select>
                    <button id="ff-start">Start</button>
                </div>
                <div class="row">
                    <div id="ff-problem" style="font-size:1.6rem;min-width:180px">—</div>
                    <input id="ff-ans" type="number" placeholder="Answer"><button id="ff-submit">Enter</button>
                    <div id="ff-timer" class="muted">—</div>
                    <span id="ff-level" class="muted"
                        style="margin-left:8px;background:var(--bg-2);border:1px solid var(--line);padding:2px 6px;border-radius:8px">Lv
                        —</span>

                </div>
                <div class="muted" id="ff-fb"></div>
            </div>
        </section>

        <!-- Cognition -->
        <section id="cognition">
            <h2>Cognition (Memory • Speed • Attention)</h2>
            <div class="card">
                <div class="row">
                    <button id="cog-run">Run Full Battery</button>
                    <button id="cog-export" class="secondary">Export Last Battery JSON</button>
                </div>
                <div class="muted">Full-screen flow with Back button; delayed PAL prompts later.</div>
            </div>
            <div id="cog-report" class="card" style="display:none"></div>
        </section>

        <!-- Progress -->
        <section id="progress">
            <h2>Progress & Data</h2>
            <div class="card row">
                <button id="export-csv">Export CSV</button>
                <button id="export-json" class="secondary">Export JSON</button>
                <button id="reset-all" class="ghost">Reset All Data</button>
            </div>
            <div class="card">
                <strong>Progress (rolling accuracy)</strong>
                <canvas id="progChart" height="140"></canvas>
            </div>
            <div class="card">
                <pre id="peek" class="muted"></pre>
            </div>
        </section>
    </main>

    <!-- ===== Full-screen Wizard overlay ===== -->
    <div class="wizard" id="wizard">
        <div class="wiz-panel">
            <div class="wiz-header">
                <button id="wiz-back" class="ghost">← Back</button>
                <div class="wiz-title" id="wiz-title">Wizard</div>
            </div>
            <div class="wiz-body" id="wiz-body"></div>
            <div class="wiz-footer">
                <div class="muted" id="wiz-hint" style="margin-right:auto"></div>
                <button id="wiz-close" class="secondary">Close</button>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
    <script
        src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <script src="scripts/main.js"></script>

</body>

</html>